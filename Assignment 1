import java.util.ArrayList;
import java.util.InputMismatchException;
import java.util.Iterator;
import java.util.Scanner;
 
// Book class to represent a single book
class Book {
   private String title;
   private String author;
   private String isbn;
 
   public Book(String title, String author, String isbn) {
       this.title = title;
       this.author = author;
       this.isbn = isbn;
   }
 
   public String getTitle() {
       return title;
   }
 
   public String getAuthor() {
       return author;
   }
 
   public String getIsbn() {
       return isbn;
   }
 
   @Override
   public String toString() {
       return "Title: " + title + ", Author: " + author + ", ISBN: " + isbn;
   }
}
 
// Library class to manage the collection of books
class Library {
   private ArrayList<Book> books;
 
   public Library() {
       this.books = new ArrayList<>();
   }
 
   public void addBook(Book book) {
       books.add(book);
       System.out.println("Book added successfully.");
   }
 
   public void deleteBook(String isbn) {
       Iterator<Book> iterator = books.iterator();
       boolean found = false;
       while (iterator.hasNext()) {
           Book book = iterator.next();
           if (book.getIsbn().equals(isbn)) {
               iterator.remove();
               found = true;
               System.out.println("Book with ISBN " + isbn + " deleted successfully.");
               break;
           }
       }
       if (!found) {
           System.out.println("Book with ISBN " + isbn + " not found in the library.");
       }
   }
 
   public void listBooks() {
       if (books.isEmpty()) {
           System.out.println("The library is empty. No books to display.");
       } else {
           System.out.println("\n--- Current Books in Library ---");
           for (Book book : books) {
               System.out.println(book);
           }
           System.out.println("--------------------------------\n");
       }
   }
}
 
// Main class for the menu-driven program
public class LibraryManagementSystem {
   public static void main(String[] args) {
       Scanner scanner = new Scanner(System.in);
       Library library = new Library();
       int choice;
 
       do {
           System.out.println("--- Library Menu ---");
           System.out.println("1. Add Book");
           System.out.println("2. Delete Book");
           System.out.println("3. List All Books");
           System.out.println("4. Exit");
           System.out.print("Enter your choice: ");
 
           try {
               choice = scanner.nextInt();
               scanner.nextLine(); // Consume newline left-over
 
               switch (choice) {
                   case 1:
                       System.out.print("Enter book title: ");
                       String title = scanner.nextLine();
                       System.out.print("Enter book author: ");
                       String author = scanner.nextLine();
                       System.out.print("Enter book ISBN: ");
                       String isbn = scanner.nextLine();
                       library.addBook(new Book(title, author, isbn));
                       break;
                   case 2:
                       System.out.print("Enter ISBN of the book to delete: ");
                       String isbnToDelete = scanner.nextLine();
                       library.deleteBook(isbnToDelete);
                       break;
                   case 3:
                       library.listBooks();
                       break;
                   case 4:
                       System.out.println("Exiting Library Management System. Goodbye!");
                       break;
                   default:
                       System.out.println("Invalid choice. Please enter a number between 1 and 4.");
                       break;
               }
           } catch (InputMismatchException e) {
               System.out.println("Invalid input. Please enter a number for your choice.");
               scanner.nextLine(); // Consume the invalid input
               choice = 0; // Set choice to 0 to re-enter the loop
           } catch (Exception e) {
               System.out.println("An unexpected error occurred: " + e.getMessage());
               choice = 0;
           }
           System.out.println(); // Add a newline for better readability
       } while (choice != 4);
 
       scanner.close();
   }
}
